import{d as e,b as a,r as o,a as l,p as s,f as n,s as r,g as t,h as i,i as d,j as m,z as u,q as c,k as p}from"./index.9b6b6501.js";import{B as g}from"./baseentity.0c850b5b.js";import{a as f}from"./axios.9f088939.js";import"./vendor.fa9df649.js";class b{static cloneT(e,a){var o=new e(null);return a&&o.setValue(a),o}}b.loginMsg=new class extends g{};const y={name:"login",setup(){const s=e(),n=a();b.loginMsg.apiprefix="localhost:4200";const t=o(null),i=l({account:"admin",password:"admin"}),d=l({account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]});return{loginForm:i,login:()=>{t.value.validate().then((()=>{if("admin"===i.account&&"admin"===i.password){let e={metaData:{username:"admin"},token:"this is token"};localStorage.setItem("userInfo",JSON.stringify(e)),s.dispatch("modifyUserInfo",e),f.get("/users/alir1162107531").then((a=>{b.loginMsg=a.data;let o=a.data;localStorage.setItem("userDetailInfo",JSON.stringify(o));s.commit("setvalue",{key:"login_permissions",value:{index:"delete"}}),n.replace("/index"),r.info(`欢迎您,${e.metaData.username}!`)})).catch((e=>{console.log("err:",e)}))}else r.error("账号或密码输入不正确！")}))},formInline:t,ruleForm:d}}},h=c();s("data-v-7a16c77c");const w={class:"login"},v={class:"login-form"},x=p("登录");n();const F=h(((e,a,o,l,s,n)=>{const r=t("el-input"),c=t("el-form-item"),p=t("el-button"),g=t("el-form");return i(),d("section",w,[m("div",v,[m(g,{ref:"formInline",model:l.loginForm,"label-width":"80px",rules:l.ruleForm},{default:h((()=>[m(c,{label:"账号：",prop:"account"},{default:h((()=>[m(r,{modelValue:l.loginForm.account,"onUpdate:modelValue":a[1]||(a[1]=e=>l.loginForm.account=e),size:"large",placeholder:"admin",onKeyup:u(l.login,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),m(c,{label:"密码：",prop:"password"},{default:h((()=>[m(r,{modelValue:l.loginForm.password,"onUpdate:modelValue":a[2]||(a[2]=e=>l.loginForm.password=e),size:"large",placeholder:"admin",type:"password",onKeyup:u(l.login,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),m(c,null,{default:h((()=>[m(p,{size:"large",type:"primary",class:"btn",onClick:l.login},{default:h((()=>[x])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])])}));y.render=F,y.__scopeId="data-v-7a16c77c";export default y;
